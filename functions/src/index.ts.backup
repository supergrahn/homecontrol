import "./admin"; // ensure firebase-admin is initialized before importing modules
import * as invites from "./invites";
import * as digest from "./digest";
import * as tasks from "./tasks";
import * as households from "./households";
import * as health from "./health";
import * as testPush from "./testPush";
import { processPushQueue } from "./notifications";
import * as comments from "./comments";
import * as fairness from "./stats";
import * as prefs from "./userPrefs";
import * as calendar from "./ics";
import * as workload from "./workload";
import * as onboarding from "./onboarding/orchestration";
import * as householdMerging from "./households/merge";
// import * as dataValidation from "./security/dataValidation"; // Temporarily disabled due to zod import issues
// import * as childSetup from "./children/setup";
// import * as rewardSystem from "./rewards/initialize";
// import * as norwegianAI from "./ai/norwegianIntelligence";
// import * as appointments from "./appointments";
import * as appointmentsMinimal from "./appointmentsMinimal";
// import * as deviceLinking from "./deviceLinking";

export const createInvite = invites.createInvite;
export const acceptInvite = invites.acceptInvite;
export const onInviteWrite = invites.onInviteWrite;

export const onHouseholdCreate = tasks.onHouseholdCreate;
export const onTaskWrite = tasks.onTaskWrite;

export const runDailyDigests = digest.runDailyDigests;
export const runDigestNow = digest.runDigestNow;
export const runDigestDryRun = digest.runDigestDryRun;
export const runNightBefore = digest.runNightBefore;
export const runNightBeforeNow = digest.runNightBeforeNow;
export const deleteHouseholdRecursive = households.deleteHouseholdRecursive;
export const processPushQueueFn = processPushQueue;
export const healthCheck = health.healthCheck;
export const sendTestPush = testPush.sendTestPush;
export const onCommentCreate = comments.onCommentCreate;
export const getFairnessStats = fairness.getFairnessStats;
export const getWorkloadHeatmap = workload.getWorkloadHeatmap;
export const checkHeatmapParity = workload.checkHeatmapParity;
export const setDigestPreferences = prefs.setDigestPreferences;
export const getDigestPreferences = prefs.getDigestPreferences;
export const createCalendarShare = calendar.createCalendarShare;
export const revokeCalendarShare = calendar.revokeCalendarShare;
export const icsFeed = calendar.icsFeed;
export const getCalendarShares = calendar.getCalendarShares;

// Norwegian Onboarding System (Phase 4)
export const completeNorwegianOnboarding = onboarding.completeNorwegianOnboarding;
export const requestHouseholdMerge = householdMerging.requestHouseholdMerge;
export const approveHouseholdMerge = householdMerging.approveHouseholdMerge;
export const processAutomaticMerge = householdMerging.processAutomaticMerge;

// Norwegian GDPR+ Compliance
// export const validateNorwegianCompliance = dataValidation.validateNorwegianCompliance;
// export const processDataDeletion = dataValidation.processDataDeletion;
// export const automaticDataRetention = dataValidation.automaticDataRetention;

// Norwegian Child Account System
// export const createChildAccount = childSetup.createChildAccount;
// export const setupChildDevice = childSetup.setupChildDevice;
// export const setupSchoolIntegration = childSetup.setupSchoolIntegration;

// Norwegian Reward System
// export const setupRewardSystem = rewardSystem.setupRewardSystem;
// export const unlockAchievement = rewardSystem.unlockAchievement;
// export const getAvailableAchievements = rewardSystem.getAvailableAchievements;

// Norwegian Family AI Assistant
// export const generateNorwegianFamilyInsights = norwegianAI.generateNorwegianFamilyInsights;
// export const norwegianAIUtilities = norwegianAI.norwegianAIUtilities;

// Norwegian Appointments System
export const createAppointment = appointmentsMinimal.createAppointmentMinimal;
// export const createAppointmentFull = appointments.createAppointment;
// export const updateAppointment = appointments.updateAppointment;
// export const deleteAppointment = appointments.deleteAppointment;
// export const getCulturalAppointmentSuggestions = appointments.getCulturalAppointmentSuggestions;
// export const onAppointmentUpdate = appointments.onAppointmentUpdate;
// export const processScheduledAppointmentNotifications = appointments.processScheduledAppointmentNotifications;

// Norwegian Device Linking System
// export const generateLinkingQR = deviceLinking.generateLinkingQR;
// export const verifyDeviceLinking = deviceLinking.verifyDeviceLinking;
// export const revokeDeviceLink = deviceLinking.revokeDeviceLink;
// export const sendSecureMessageToChild = deviceLinking.sendSecureMessageToChild;
// export const updateDevicePermissions = deviceLinking.updateDevicePermissions;
// export const cleanupExpiredLinkingRequests = deviceLinking.cleanupExpiredLinkingRequests;
// export const processScheduledMessages = deviceLinking.processScheduledMessages;
